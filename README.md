Webベース タイピングソフト 仕様書 (たたき台) - 更新版

1. 概要 (変更なし)

1.1. プロジェクト名: (仮称) Webタイピング練習ソフト
1.2. 目的:
ユーザーがブラウザ上で手軽にタイピング練習を行えるようにする。
キー入力の正確性と速度の向上を支援する。
1.3. 対象ユーザー: タイピングスキルを向上させたい全ての人。特にキーボード操作に慣れたい初心者から中級者。
1.4. 開発環境/動作環境:
開発技術: HTML, CSS, JavaScript (フロントエンドのみで完結)
動作環境: 主要なモダンブラウザ (Chrome, Firefox, Safari, Edge の最新版を推奨)
2. 画面仕様

2.1. 共通レイアウト: (変更なし)

ヘッダー (任意): 「もどる」ボタンなどを配置可能な領域。
メインコンテンツエリア: 各画面の主要な要素が表示される。
フッター (任意): コピーライト表示など。
全体的なデザインは、ご提示いただいたスクリーンショットのようなシンプルでクリーンなUIを目指す。
2.2. スタート画面 (ゲーム開始前)

2.2.1. 表示項目:
【追加】難易度選択UI: ラジオボタンやドロップダウンリスト形式で、4段階の難易度（例: 「初級」「中級」「上級」「達人」または「レベル1」「レベル2」「レベル3」「レベル4」）を選択できるようにする。デフォルトでいずれかの難易度（例: 「初級」または「中級」）が選択されている状態とする。
中央に「スペースキーをおしてスタート」というメッセージを表示（難易度選択後に表示、または常に表示し、難易度未選択時は開始不可とするなど挙動を明確化）。
(任意) 画面下部に仮想キーボードのイメージを表示（操作不可、ガイドとして）。
(任意) 「日本語入力モードをオフにしてください」などの補足メッセージ。
2.2.2. 操作:
ユーザーが難易度を選択する。
難易度選択後、スペースキー押下でカウントダウン開始。
2.3. カウントダウン表示: (変更なし)

2.3.1. 表示項目:
画面中央に「3」→「2」→「1」と1秒ごとにカウントダウンを表示。
(任意) カウントダウン後に「スタート！」などの開始合図を表示。
2.4. タイピング画面 (ゲーム中): (変更なし、難易度はゲーム開始前に決定されるため)

2.4.1. 表示項目:
問題文表示エリア
仮想キーボード表示エリア (画面下部)
情報表示エリア (経過時間/残り時間、スコア、入力文字表示設定UIなど)
2.4.2. 操作:
キーボードからの文字入力
バックスペースキーによる削除
ESCキー押下でゲーム中断
2.5. 結果表示画面: (変更なし)

2.5.1. 表示項目:
最終スコア
「もう一度挑戦する (リトライ)」ボタン
(任意) 「スタート画面に戻る」ボタン
3. 機能仕様

3.1. ゲーム開始処理: (変更なし)

3.1.1. スタート画面でスペースキーが押されたら処理を開始する（難易度選択済みであること）。
3.1.2. 3秒間のカウントダウン処理を行い、画面に表示する。カウントダウン終了後、タイピング入力受付を開始する。
3.2. 問題文関連

3.2.1. 問題文のソース:
【変更】 難易度別に4種類のJSONファイルを用意する。各ファイルには、その難易度に適した単語や文章を文字列の配列として格納する。
【変更】 ファイル構成例 (ファイル名は具体的な難易度を示すものが望ましい):
questions_level1.json (例: 初級 - 簡単な単語中心)
questions_level2.json (例: 中級 - 短めの一般的な文章)
questions_level3.json (例: 上級 - やや長めの文章、一部記号含む)
questions_level4.json (例: 達人 - 長文、多様な記号・数字を含む)
【変更】 各JSONファイルの内容は、文字列の配列とする。例: ["example word", "this is a sample sentence.", "another_example_123!"]
3.2.2. 問題文の表示: (変更なし)
画面に表示する問題文を1文字ずつHTML要素（例: <span>）でラップし、CSSでスタイルを制御できるようにする。
入力状況に応じて、文字のスタイルを動的に変更する。
【追加】3.2.3. 難易度選択と問題文読み込み:
スタート画面でユーザーが選択した難易度に基づき、読み込むべきJSONファイルを特定する。
JavaScriptの Workspace API を使用して、選択された難易度に対応するJSONファイルを非同期で読み込む。
読み込みに成功した場合、取得した問題文の配列をシャッフルする、またはそのままの順序でタイピングゲームに使用する。
ファイル読み込みに失敗した場合（例: ファイルが存在しない、JSON形式が不正など）、ユーザーにエラーメッセージを表示するか、デフォルトの難易度（例: questions_level1.json）の問題文を読み込むなどのフォールバック処理を行う (エラーハンドリングは要検討)。
3.3. 入力処理: (変更なし)

3.4. 入力文字表示設定: (変更なし)

3.5. 仮想キーボード: (変更なし)

3.6. 時間計測: (変更なし)

3.7. スコア計算: (変更なし)

3.8. ゲーム終了処理: (変更なし)

3.9. (オプション) 「もどる」ボタン機能: (変更なし)

3.10. (オプション) プログレスバー機能: (変更なし)

4. 非機能要件 (考慮事項) (変更なし)

4.1. アクセシビリティ
4.2. パフォーマンス
4.3. 対応ブラウザ
